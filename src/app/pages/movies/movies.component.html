<!-- Form section -->
<div class="form--container">
  <div>
    <p>Hi! Welcome</p>
    <p>Kindly enter your details here</p>
    <div class="border">
      <button class="btn btn-md btn-outline-primary" (click)="open(content)">
        <i class="fa fa-user"></i>New Movie
      </button>
    </div>
  </div>
  <div>
    <!-- <form novalidate (ngSubmit)="save()" [formGroup]="customerForm">
      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="firstNameId"
          >First Name</label
        >
        <div class="col-md-8">
          <input
            class="form-control"
            id="firstNameId"
            type="text"
            placeholder="First Name (required)"
            required
            minlength="3"
            formControlName="firstName"
            [ngClass]="{
              'is-invalid':
                (customerForm.get('firstName')?.touched ||
                  customerForm.get('firstName')?.dirty) &&
                !customerForm.get('firstName')?.valid
            }"
          />
          <span class="invalid-feedback">
            <span *ngIf="customerForm.get('firstName')?.errors?.['required']">
              Please enter your first name.
            </span>
            <span *ngIf="customerForm.get('firstName')?.errors?.['minlength']">
              The first name must be longer than 3 characters.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="lastNameId"
          >Last Name</label
        >
        <div class="col-md-8">
          <input
            class="form-control"
            id="lastNameId"
            type="text"
            placeholder="Last Name (required)"
            required
            maxlength="50"
            formControlName="lastName"
            [ngClass]="{
              'is-invalid':
                (customerForm.get('lastName')?.touched ||
                  customerForm.get('lastName')?.dirty) &&
                !customerForm.get('lastName')?.valid
            }"
          />
          <span class="invalid-feedback">
            <span *ngIf="customerForm.get('lastName')?.errors?.['required']">
              Please enter your last name.
            </span>
            <span *ngIf="customerForm.get('lastName')?.errors?.['maxlength']">
              The last name must be less than 50 characters.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
        <label class="col-md-2 col-form-label" for="emailId">Email</label>
        <div class="col-md-8">
          <input
            class="form-control"
            id="emailId"
            type="email"
            placeholder="Email (required)"
            required
            email
            formControlName="email"
            [ngClass]="{
              'is-invalid':
                (customerForm.get('email')?.touched ||
                  customerForm.get('email')?.dirty) &&
                !customerForm.get('email')?.valid
            }"
          />
          <span class="invalid-feedback">
            <span *ngIf="customerForm.get('email')?.errors?.['required']">
              Please enter your email address.
            </span>
            <span *ngIf="customerForm.get('email')?.errors?.['email']">
              Please enter a valid email address.
            </span>
          </span>
        </div>
      </div>

      <div class="form-group row mb-2">
         <label class="col-md-2 col-form-label" for="movieId"
           >Favourite movie</label
         >
         <div class="col-md-8">
           <input
             class="form-control"
             id="movieId"
             type="text"
             placeholder="Favourite movie (required)"
             required
             minlength="3"
             formControlName="movie"
             [ngClass]="{
               'is-invalid':
                 (customerForm.get('movie')?.touched ||
                   customerForm.get('movie')?.dirty) &&
                 !customerForm.get('movie')?.valid
             }"
           />
           <span class="invalid-feedback">
             <span *ngIf="customerForm.get('movie')?.errors?.['required']">
               Please enter your Favourite movie.
             </span>
             <span *ngIf="customerForm.get('firstName')?.errors?.['minlength']">
               Your Favourite movie must be longer than 3 characters.
             </span>
           </span>
         </div>
       </div>
       <div class="form-group row mb-2">
         <label class="col-md-2 col-form-label" for="movieYearId"
           >Movie Production year</label
         >
         <div class="col-md-8">
           <input
             class="form-control"
             id="movieYearId"
             type="number"
             placeholder="Movie Production year (required)"
             required
             minlength="3"
             formControlName="movieYear"
             [ngClass]="{
               'is-invalid':
                 (customerForm.get('movieYear')?.touched ||
                   customerForm.get('movieYear')?.dirty) &&
                 !customerForm.get('movieYear')?.valid
             }"
           />
           <span class="invalid-feedback">
             <span *ngIf="customerForm.get('movieYear')?.errors?.['required']">
               Please enter your Movie Production year.
             </span>
             <span *ngIf="customerForm.get('movieYear')?.errors?.['minlength']">
               Your Movie Production year must be longer than 3 characters.
             </span>
           </span>
         </div>
       </div>
    
      <div class="form-group row mb-2">
        <div class="offset-md-2 col-md-4">
          <button
            class="btn btn-primary mr-3"
            type="submit"
            style="width: 80px"
            [title]="
              customerForm.valid
                ? 'Save your entered data'
                : 'Disabled until the form data is valid'
            "
            [disabled]="!customerForm.valid"
          >
            Save
          </button>

        </div>
      </div>
    </form> -->

    <!-- Form table -->
    <div class="form-table">
      <section class="mt-5">
        <table id="formUsers">
          <tr>
            <th class="col-md-2">S/N</th>
            <th class="col-md-2">First Name</th>
            <th class="col-md-2">Last Name</th>
            <th class="col-md-2">Email</th>
            <th class="col-md-2">Favourite Movie</th>
            <th class="col-md-2">Movie</th>
            <th class="col-md-2">Update</th>
            <th class="col-md-2">Delete</th>
          </tr>
          <tr *ngFor="let MovieUser of MovieUsers">
            <td>{{ MovieUser.id }}</td>
            <td (click)="getDataById(MovieUser.id)" class="cursor">
              {{ MovieUser.firstName }}
            </td>
            <td>{{ MovieUser.lastName }}</td>
            <td>{{ MovieUser.email }}</td>
            <td>{{ MovieUser.favouriteMovie }}</td>
            <td>{{ MovieUser.movieYear }}</td>
            <!-- <td>
               <button (click)="update(MovieUser.id)">Edit</button>
             </td>
             <td>
               <button (click)="deleteItem(MovieUser.id)">Delete</button> 
             </td> -->
            <td>
              <!-- <button class="btn btn-sm btn-info">
                <i class="fa fa-search"></i>Details</button> -->
              <button class="btn btn-sm btn-warning" (click)="open(content)">
                <i class="fa fa-edit"></i>Edit
              </button>
            </td>
            <td>
              <button class="btn btn-sm btn-danger" >
                <i class="fa fa-remove"></i>Delete
              </button>
            </td>
          </tr>
        </table>
      </section>
    </div>
  </div>

  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">New Movie</h4>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form novalidate (ngSubmit)="save()" [formGroup]="customerForm">
        <div class="form-group">
          <label for="firstname">Firstname</label>
          <div class="input-group">
            <input id="firstname" class="form-control" />
          </div>
          <label for="lastname">Lastname</label>
          <div class="input-group">
            <input id="lastname" class="form-control" />
          </div>
          <label for="email">Email</label>
          <div class="input-group">
            <input id="email" class="form-control" />
          </div>
          <label for="favouriteMovie">Favourite Movie</label>
          <div class="input-group">
            <input id="favouriteMovie" class="form-control" />
          </div>
          <label for="Movie Year">Movie Year</label>
          <div class="input-group">
            <input id="Movie Year" class="form-control" />
          </div>
          <div class="border text-center">
            <button data-dismiss="modal" class="btn btn-info">Submit</button>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark"
        (click)="modal.close('Save click')"
      >
        Save
      </button>
    </div>
  </ng-template> 
  <!-- Nesting  Footer Component-->
  <div>
    <app-movie-footer></app-movie-footer>
  </div>
</div>
